{
    "device_type": "WB-MAI2",
    "setup_schema": {
        "definitions": {
            "disabled_item": {
                "type": "object",
                "title": "disabled",
                "properties": {
                    "data_rate": {
                        "type": "integer",
                        "enum": [ 0 ],
                        "default": 0,
                        "options": {
                            "hidden": true
                        }
                    }
                },
                "options" : {
                    "disable_collapse": true,
                    "collapsed": true,
                    "disable_edit_json": true,
                    "disable_properties": true
                }
            },
            "channel_common" : {
                "properties": {
                    "data_rate": {
                        "title": "Data rate",
                        "type": "integer",
                        "propertyOrder": 2,
                        "enum": [20, 45, 90, 175, 330, 600, 1000]
                    },
                    "count": {
                        "title": "Number of measurements",
                        "minimum": 0,
                        "maximum": 50,
                        "propertyOrder": 3,
                        "type": "integer"
                    },
                    "lowpass": {
                        "title": "Lowpass filter time, ms",
                        "minimum": 0,
                        "maximum": 65000,
                        "propertyOrder": 4,
                        "type": "integer"
                    }
                }
            },
            "pin_common" : {
                "allOf": [ {"$ref": "#/definitions/channel_common"} ],
                "properties": {
                    "low": {
                        "title": "Minimum value",
                        "propertyOrder": 5,
                        "type": "integer"
                    },
                    "high": {
                        "title": "Maximum value",
                        "propertyOrder": 6,
                        "type": "integer"
                    },
                    "k": {
                        "title": "Gain",
                        "propertyOrder": 7,
                        "type": "integer",
                        "enum": [0, 1, 2, 4],
                        "options": {
                            "enum_titles": [
                                "auto"
                            ]
                        }
                    }
                }
            },
            "pin_common_128" : {
                "allOf": [ {"$ref": "#/definitions/channel_common"} ],
                "properties": {
                    "low": {
                        "title": "Minimum value",
                        "propertyOrder": 5,
                        "type": "integer"
                    },
                    "high": {
                        "title": "Maximum value",
                        "propertyOrder": 6,
                        "type": "integer"
                    },
                    "k": {
                        "title": "Gain",
                        "propertyOrder": 7,
                        "type": "integer",
                        "enum": [0, 1, 2, 4, 8, 16, 32, 64, 128],
                        "options": {
                            "enum_titles": [
                                "auto"
                            ]
                        }
                    }
                }
            },
            "two_wire_ratiometric" : {
                "type": "object",
                "title": "ratiometric sensor",
                "allOf": [ {"$ref": "#/definitions/pin_common"} ],
                "properties": {
                    "sensor_type": {
                        "type": "integer",
                        "enum": [ 0 ],
                        "default": 0,
                        "options": {
                            "hidden": true
                        }
                    },
                    "registers": {
                        "type": "array",
                        "minItems": 3,
                        "maxItems": 3,
                        "items": { "$ref": "#/definitions/channelSettings"},
                        "default": [{"name": "aaa"}, {"name": "bbb"}, {"name": "ccc"}],
                        "options": {
                            "disable_collapse": true,
                            "disable_array_reorder": true
                        },
                        "format": "tabs"
                    }
                },
                "options": {
                    "disable_edit_json": true,
                    "disable_properties": true,
                    "disable_collapse": true
                },
                "format": "grid"
            },
            "voltage_0_2": {
                "type": "object",
                "title": "normal voltage measurement from 0 to 2 V",
                "allOf": [ {"$ref": "#/definitions/pin_common"} ],
                "properties": {
                    "sensor_type": {
                        "type": "integer",
                        "enum": [1],
                        "default": 1,
                        "options": {
                            "hidden": true
                        }
                    }
                },
                "options": {
                    "disable_edit_json": true,
                    "disable_properties": true,
                    "disable_collapse": true
                },
                "format": "grid"
            },
            "voltage_0_1": {
                "type": "object",
                "title": "normal voltage measurement from 0 to 1 V",
                "allOf": [ {"$ref": "#/definitions/channel_common"} ],
                "properties": {
                    "sensor_type": {
                        "type": "integer",
                        "enum": [5120],
                        "default": 5120,
                        "options": {
                            "hidden": true
                        }
                    }
                },
                "options": {
                    "disable_edit_json": true,
                    "disable_properties": true,
                    "disable_collapse": true
                },
                "format": "grid"
            },
            "channelSettings": {
                "type": "object",
                "headerTemplate": "{{self.name}}",
                "properties": {
                    "name": {
                      "title": "Name",
                      "type": "string",
                      "propertyOrder": 1,
                      "readOnly": true,
                      "options": {
                          "hidden": true
                      }
                    },
                    "enabled": {
                        "type": "boolean",
                        "title": "Enabled",
                        "default": false,
                        "format": "checkbox",
                        "propertyOrder": 2
                    },
                    "poll_interval": {
                        "type": "integer",
                        "title": "Poll interval (ms)",
                        "minimum": 0,
                        "default": 20,
                        "propertyOrder": 3,
                        "options": {
                            "dependencies": {
                                "enabled": true
                            }
                        }
                    }
                },
                "options": {
                    "disable_edit_json": true,
                    "disable_properties": true,
                    "disable_collapse": true
                }
            }
        },
        "type": "array",
        "title": "Settings",
        "propertyOrder": 8,
        "minItems": 11,
        "maxItems": 11,
        "items": {
            "title": "Channel",
            "headerTemplate": "Channel {{i1}}",
            "oneOf": [
                {
                    "properties": {
                        "device_type_id": {
                            "type": "integer",
                            "enum": [ 0 ],
                            "default": 0,
                            "options": {
                                "hidden": true
                            }
                        }
                    },
                    "$ref": "#/definitions/disabled_item"
                },
                {
                    "type": "object",
                    "title": "voltage measurement from ratiometric sensors",
                    "properties": {
                        "device_type_id": {
                            "type": "integer",
                            "enum": [ 1 ],
                            "default": 1,
                            "options": {
                                "hidden": true
                            }
                        },
                        "in_p": {
                            "title": "IN_P",
                            "oneOf": [
                                {"$ref": "#/definitions/two_wire_ratiometric"}
                            ]
                        },
                        "in_n": {
                            "title": "IN_N",
                            "oneOf": [
                                { "$ref": "#/definitions/disabled_item" },
                                { "$ref": "#/definitions/two_wire_ratiometric" }
                            ]
                        }
                    },
                    "options": {
                        "disable_edit_json": true,
                        "disable_properties": true,
                        "disable_collapse": true
                    }
                },
                {
                    "title": "differential voltage measurement from ratiometric sensor",
                    "type": "object",
                    "allOf": [ {"$ref": "#/definitions/pin_common"} ],
                    "properties": {
                        "device_type_id": {
                            "type": "integer",
                            "enum": [ 2 ],
                            "default": 2,
                            "options": {
                                "hidden": true
                            }
                        },
                        "sensor_type": {
                            "type": "integer",
                            "enum": [ 256 ],
                            "default": 256,
                            "options": {
                                "hidden": true
                            }
                        }
                    },
                    "options": {
                        "disable_edit_json": true,
                        "disable_properties": true,
                        "disable_collapse": true
                    },
                    "format": "grid"
                },
                {
                    "type": "object",
                    "title": "normal voltage measurement from 0 to 2 V",
                    "properties": {
                        "device_type_id": {
                            "type": "integer",
                            "enum": [ 3 ],
                            "default": 3,
                            "options": {
                                "hidden": true
                            }
                        },
                        "in_p": {
                            "title": "IN_P",
                            "oneOf": [
                                {"$ref": "#/definitions/voltage_0_2"}
                            ]
                        },
                        "in_n": {
                            "title": "IN_N",
                            "oneOf": [
                                { "$ref": "#/definitions/disabled_item" },
                                { "$ref": "#/definitions/voltage_0_2" },
                                { "$ref": "#/definitions/voltage_0_1" }
                            ],
                            "options": {
                                "keep_oneof_values": false
                            }
                        }
                    },
                    "options" : {
                        "disable_collapse": true,
                        "disable_edit_json": true,
                        "disable_properties": true
                    }
                },
                {
                    "type": "object",
                    "title": "normal voltage measurement from 0 to 1 V",
                    "properties": {
                        "device_type_id": {
                            "type": "integer",
                            "enum": [ 4 ],
                            "default": 4,
                            "options": {
                                "hidden": true
                            }
                        },
                        "in_p": {
                            "title": "IN_P",
                            "oneOf": [
                                {"$ref": "#/definitions/voltage_0_1"}
                            ]
                        },
                        "in_n": {
                            "title": "IN_N",
                            "oneOf": [
                                { "$ref": "#/definitions/disabled_item" },
                                { "$ref": "#/definitions/voltage_0_2" },
                                { "$ref": "#/definitions/voltage_0_1" }
                            ],
                            "options": {
                                "keep_oneof_values": false
                            }
                        }
                    },
                    "options" : {
                        "disable_collapse": true,
                        "disable_edit_json": true,
                        "disable_properties": true
                    }
                },
                {
                    "type": "object",
                    "title": "differential voltage measurement from -2 to 2V",
                    "allOf": [ {"$ref": "#/definitions/pin_common_128"} ],
                    "properties": {
                        "device_type_id": {
                            "type": "integer",
                            "enum": [ 5 ],
                            "default": 5,
                            "options": {
                                "hidden": true
                            }
                        },
                        "sensor_type": {
                            "type": "integer",
                            "enum": [ 257 ],
                            "default": 257,
                            "options": {
                                "hidden": true
                            }
                        }
                    },
                    "options": {
                        "disable_edit_json": true,
                        "disable_properties": true,
                        "disable_collapse": true
                    },
                    "format": "grid"
                },
                {
                    "type": "object",
                    "title": "differential voltage measurement from -50 to 50mV",
                    "allOf": [ {"$ref": "#/definitions/channel_common"} ],
                    "properties": {
                        "device_type_id": {
                            "type": "integer",
                            "enum": [ 6 ],
                            "default": 6,
                            "options": {
                                "hidden": true
                            }
                        },
                        "sensor_type": {
                            "type": "integer",
                            "enum": [ 5376 ],
                            "default": 5376,
                            "options": {
                                "hidden": true
                            }
                        }
                    },
                    "options": {
                        "disable_edit_json": true,
                        "disable_properties": true,
                        "disable_collapse": true
                    },
                    "format": "grid"
                },
                {
                    "type": "object",
                    "title": "thermocouple ТХА (K)",
                    "allOf": [ {"$ref": "#/definitions/channel_common"} ],
                    "properties": {
                        "device_type_id": {
                            "type": "integer",
                            "enum": [ 7 ],
                            "default": 7,
                            "options": {
                                "hidden": true
                            }
                        },
                        "sensor_type": {
                            "type": "integer",
                            "enum": [ 4096 ],
                            "default": 4096,
                            "options": {
                                "hidden": true
                            }
                        }
                    },
                    "options": {
                        "disable_edit_json": true,
                        "disable_properties": true,
                        "disable_collapse": true
                    },
                    "format": "grid"

                }
            ],
            "options" : {
                "keep_oneof_values": false
            }
        },
        "options" : {
            "disable_array_delete": true,
            "disable_array_reorder": true
        },
        "format": "tabs"
    },
    "device": {
        "name": "WB-MAI2",
        "id": "wb-mai2",
        "max_read_registers": 60,
        "response_timeout_ms": 1,
        "frame_timeout_ms": 8,
        "channels": [
            {
                "name": "IN1_IN1P raw",
                "reg_type": "input",
                "address": "0x1500",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN1N raw",
                "reg_type": "input",
                "address": "0x1502",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN1_IN1P",
                "reg_type": "input",
                "address": "0x1504",
                "type": "value"
            },
            {
                "name": "IN1N",
                "reg_type": "input",
                "address": "0x1505",
                "type": "value"
            },
            {
                "name": "IN1_IN1P gain",
                "reg_type": "input",
                "address": "0x1506",
                "type": "value"
            },
            {
                "name": "IN1N gain",
                "reg_type": "input",
                "address": "0x1507",
                "type": "value"
            },

            {
                "name": "IN2_IN2P raw",
                "reg_type": "input",
                "address": "0x2500",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN2N raw",
                "reg_type": "input",
                "address": "0x2502",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN2_IN2P",
                "reg_type": "input",
                "address": "0x2504",
                "type": "value"
            },
            {
                "name": "IN2N",
                "reg_type": "input",
                "address": "0x2505",
                "type": "value"
            },
            {
                "name": "IN2_IN2P gain",
                "reg_type": "input",
                "address": "0x2506",
                "type": "value"
            },
            {
                "name": "IN2N gain",
                "reg_type": "input",
                "address": "0x2507",
                "type": "value"
            },

            {
                "name": "IN3_IN3P raw",
                "reg_type": "input",
                "address": "0x3500",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN3N raw",
                "reg_type": "input",
                "address": "0x3502",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN3_IN3P",
                "reg_type": "input",
                "address": "0x3504",
                "type": "value"
            },
            {
                "name": "IN3N",
                "reg_type": "input",
                "address": "0x3505",
                "type": "value"
            },
            {
                "name": "IN3_IN3P gain",
                "reg_type": "input",
                "address": "0x3506",
                "type": "value"
            },
            {
                "name": "IN3N gain",
                "reg_type": "input",
                "address": "0x3507",
                "type": "value"
            },

            {
                "name": "IN4_IN4P raw",
                "reg_type": "input",
                "address": "0x4500",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN4N raw",
                "reg_type": "input",
                "address": "0x4502",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN4_IN4P",
                "reg_type": "input",
                "address": "0x4504",
                "type": "value"
            },
            {
                "name": "IN4N",
                "reg_type": "input",
                "address": "0x4505",
                "type": "value"
            },
            {
                "name": "IN4_IN4P gain",
                "reg_type": "input",
                "address": "0x4506",
                "type": "value"
            },
            {
                "name": "IN4N gain",
                "reg_type": "input",
                "address": "0x4507",
                "type": "value"
            },

            {
                "name": "IN5_IN5P raw",
                "reg_type": "input",
                "address": "0x5500",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN5N raw",
                "reg_type": "input",
                "address": "0x5502",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN5_IN5P",
                "reg_type": "input",
                "address": "0x5504",
                "type": "value"
            },
            {
                "name": "IN5N",
                "reg_type": "input",
                "address": "0x5505",
                "type": "value"
            },
            {
                "name": "IN5_IN5P gain",
                "reg_type": "input",
                "address": "0x5506",
                "type": "value"
            },
            {
                "name": "IN5N gain",
                "reg_type": "input",
                "address": "0x5507",
                "type": "value"
            },

            {
                "name": "IN6_IN6P raw",
                "reg_type": "input",
                "address": "0x6500",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN6N raw",
                "reg_type": "input",
                "address": "0x6502",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN6_IN6P",
                "reg_type": "input",
                "address": "0x6504",
                "type": "value"
            },
            {
                "name": "IN6N",
                "reg_type": "input",
                "address": "0x6505",
                "type": "value"
            },
            {
                "name": "IN6_IN6P gain",
                "reg_type": "input",
                "address": "0x6506",
                "type": "value"
            },
            {
                "name": "IN6N gain",
                "reg_type": "input",
                "address": "0x6507",
                "type": "value"
            },

            {
                "name": "IN7_IN7P raw",
                "reg_type": "input",
                "address": "0x7500",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN7N raw",
                "reg_type": "input",
                "address": "0x7502",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN7_IN7P",
                "reg_type": "input",
                "address": "0x7504",
                "type": "value"
            },
            {
                "name": "IN7N",
                "reg_type": "input",
                "address": "0x7505",
                "type": "value"
            },
            {
                "name": "IN7_IN7P gain",
                "reg_type": "input",
                "address": "0x7506",
                "type": "value"
            },
            {
                "name": "IN7N gain",
                "reg_type": "input",
                "address": "0x7507",
                "type": "value"
            },

            {
                "name": "IN8_IN8P raw",
                "reg_type": "input",
                "address": "0x8500",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN8N raw",
                "reg_type": "input",
                "address": "0x8502",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN8_IN8P",
                "reg_type": "input",
                "address": "0x8504",
                "type": "value"
            },
            {
                "name": "IN8N",
                "reg_type": "input",
                "address": "0x8505",
                "type": "value"
            },
            {
                "name": "IN8_IN8P gain",
                "reg_type": "input",
                "address": "0x8506",
                "type": "value"
            },
            {
                "name": "IN8N gain",
                "reg_type": "input",
                "address": "0x8507",
                "type": "value"
            },

            {
                "name": "IN9_IN9P raw",
                "reg_type": "input",
                "address": "0x9500",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN9N raw",
                "reg_type": "input",
                "address": "0x9502",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN9_IN9P",
                "reg_type": "input",
                "address": "0x9504",
                "type": "value"
            },
            {
                "name": "IN9N",
                "reg_type": "input",
                "address": "0x9505",
                "type": "value"
            },
            {
                "name": "IN9_IN9P gain",
                "reg_type": "input",
                "address": "0x9506",
                "type": "value"
            },
            {
                "name": "IN9N gain",
                "reg_type": "input",
                "address": "0x9507",
                "type": "value"
            },

            {
                "name": "IN10_IN10P raw",
                "reg_type": "input",
                "address": "0xA500",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN10N raw",
                "reg_type": "input",
                "address": "0xA502",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN10_IN10P",
                "reg_type": "input",
                "address": "0xA504",
                "type": "value"
            },
            {
                "name": "IN10N",
                "reg_type": "input",
                "address": "0xA505",
                "type": "value"
            },
            {
                "name": "IN10_IN10P gain",
                "reg_type": "input",
                "address": "0xA506",
                "type": "value"
            },
            {
                "name": "IN10N gain",
                "reg_type": "input",
                "address": "0xA507",
                "type": "value"
            },

            {
                "name": "IN11_IN11P raw",
                "reg_type": "input",
                "address": "0xB500",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN11N raw",
                "reg_type": "input",
                "address": "0xB502",
                "type": "value",
                "format": "s32"
            },
            {
                "name": "IN11_IN11P",
                "reg_type": "input",
                "address": "0xB504",
                "type": "value"
            },
            {
                "name": "IN11N",
                "reg_type": "input",
                "address": "0xB505",
                "type": "value"
            },
            {
                "name": "IN11_IN11P gain",
                "reg_type": "input",
                "address": "0xB506",
                "type": "value"
            },
            {
                "name": "IN11N gain",
                "reg_type": "input",
                "address": "0xB507",
                "type": "value"
            },

            {
                "name": "5V output voltage",
                "reg_type": "input",
                "address": "0x0600",
                "type": "voltage",
                "scale": 0.001,
                "round_to": 0.001
            },

            {
                "name": "Internal Temperature",
                "reg_type": "input",
                "address": "0x0601",
                "type": "temperature",
                "format": "s16",
                "error_value" : "0x7fff",
                "scale": 0.01,
                "round_to": 0.01
            },

            {
                "name": "Serial",
                "type": "text",
                "reg_type": "input",
                "address": 270,
                "format": "u32"
            }
        ]
    }
}
